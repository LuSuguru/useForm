var useForm=function(r,d){"use strict";var M=function(){return(M=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}).apply(this,arguments)};var e=Object.freeze({__proto__:null,mobileFormat:function(r){return void 0===r&&(r=""),(r=r.replace(/\D/g,"").slice(0,11)).length<4?r:4<=r.length&&r.length<8?r.replace(/(\d{3})/,"$1 "):8<=r.length?r.replace(/(\d{3})(\d{4})/,"$1 $2 "):void 0},verifyFormat:function(r){return void 0===r&&(r=""),r=r.replace(/\D/g,"").slice(0,4)},identityFormat:function(r){return void 0===r&&(r=""),(r=r.replace(/\s/g,"").slice(0,18)).length<7?r:7<=r.length&&r.length<15?r.replace(/(\d{6})/,"$1 "):15<=r.length?r.replace(/(\d{6})(\d{8})/,"$1 $2 "):void 0}});function k(r){var e=d.useRef(null);return e.current=r,e}function i(r,e){return"function"==typeof e&&(e=e(r)),M(M({},r),e)}function y(r,e){void 0===e&&(e=i);var t=d.useReducer(e,r),n=t[0],a=t[1],u=d.useCallback(function(){a(r)},[]);return[n,a,u]}function F(r){var e=r.value,t=r.errorMsg;return Array.isArray(e)&&!e.length?t:""===e||!1===e||void 0===e?t:void 0}function O(r){var e=r.value,t=r.pattern,n=r.errorMsg;if(e&&!e.match(t))return n}function j(r){var e=r.value,t=r.max,n=r.errorMsg;if(e&&e.length>t)return n}function V(r){var e=r.value,t=r.min,n=r.errorMsg;if(e&&e.length<t)return n}var t=Object.freeze({__proto__:null,isRequired:F,isPrice:function(r){var e=r.value,t=r.errorMsg;if(e&&!e.match(/^(0|[1-9]+)(\.[0-9]+)?$/))return t},isMobile:function(r){var e=r.value,t=void 0===e?"":e,n=r.errorMsg;if(t&&!t.match(/^(0|86|17951)?(13[0-9]|15[0-9]|17[0-9]|18[0-9]|14[0-9])[0-9]{8}$/))return n},isIdentity:function(r){var e=r.value,t=r.errorMsg;if(e&&!e.match(/^\d{17}[0-9Xx]$/))return t},isReg:O,isVerify:function(r){var e=r.value,t=r.errorMsg;if(e&&!e.match(/\d{4}/))return t},isMax:j,isMin:V});function $(r){return void 0!==r?r:void 0}var R={valuePropName:"value",autoValidator:!0};return r.Format=e,r.Strategies=t,r.default=function(){var r=y({}),e=r[0],g=r[1],t=r[2],n=y({}),a=n[0],i=n[1],u=n[2],h=k(e),o=k(a),p=d.useRef({}),m=d.useRef({});function b(u){return function(n){var r,e=o.current[u]||{},t=m.current[u].rules,a="";return t.forEach(function(r){if(!a){var e=function(r){var e=r.required,t=r.max,n=r.min,a=r.pattern,u=r.validator;return e?F:t?function(r){return j({value:r.value,errorMsg:r.errorMsg,max:t})}:n?function(r){return V({value:r.value,errorMsg:r.errorMsg,min:n})}:a?function(r){return O({value:r.value,errorMsg:r.errorMsg,pattern:a})}:u}(r);if(e){var t=e({value:n,errorMsg:r.message,formData:h.current});t&&(a=t)}}}),e.help===a?e.help:(i(((r={})[u]=function(r){return r?{help:r,hasFeedback:!0,validateStatus:"error"}:{help:"",hasFeedback:!1,validateStatus:"success"}}(a),r)),a)}}var c=d.useCallback(function(r){var e=Object.keys(r).reduce(function(r,e){var t;return M(M({},r),((t={})[e]={help:"",hasFeedback:!1,validateStatus:"success"},t))},{});i(e),g(r)},[]),l=d.useCallback(function(a){var r=Object.keys(a).reduce(function(r,e){var t,n;return n=a[e]?{help:a[e],hasFeedback:!0,validateStatus:"error"}:{help:"",hasFeedback:!1,validateStatus:"success"},M(M({},r),((t={})[e]=n,t))},{});i(r)},[]),s=d.useCallback(function(r){return 0===(r||Object.keys(h.current)).filter(function(r){var e=h.current[r],t=m.current[r].rules;return!!(t&&0<t.length)&&b(r)(e)}).length},[]),v=d.useCallback(function(){var r=function(t){var n={},a={};return Object.keys(t).forEach(function(r){var e=t[r].initialValue;n[r]=$(e),a[r]={help:"",hasFeedback:!1}}),{initialValues:n,initialErrors:a}}(m.current).initialValues;c(r)},[c]),f=d.useCallback(function(){u(),t()},[]);return{formData:e,errorProps:a,init:function(n,r){var e,t=p.current[n];if(t)return t;var a=r||R,u=a.valuePropName,i=void 0===u?"value":u,o=a.initialValue,c=a.rules,l=a.autoValidator,s=void 0===l||l,v=a.normalize,f=a.getValueformEvent;m.current[n]=r||R,h.current[n]||(h.current[n]=$(o));var d=(e={},Object.defineProperty(e,i,{get:function(){var r=h.current[n];return"checked"===r?!!r:r},enumerable:!0,configurable:!0}),e.onChange=function(r){var e,t;t=f?f(r):function(r,e){return void 0===r&&(r="value"),e&&e.target&&r in e.target?e.target[r]:e}(i,r),v&&(t=v(t)),c&&0<c.length&&s&&b(n)(t),g(((e={})[n]=t,e))},e);return p.current[n]=d},setFormData:c,setErrorProps:l,isValidateSuccess:s,onResetForm:v,onReset:f}},r}({},react);
