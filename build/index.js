var useForm=function(r,s){"use strict";var v=function(){return(v=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}).apply(this,arguments)};var e=Object.freeze({__proto__:null,mobileFormat:function(r){return void 0===r&&(r=""),(r=r.replace(/\D/g,"").slice(0,11)).length<4?r:4<=r.length&&r.length<8?r.replace(/(\d{3})/,"$1 "):8<=r.length?r.replace(/(\d{3})(\d{4})/,"$1 $2 "):void 0},verifyFormat:function(r){return void 0===r&&(r=""),r=r.replace(/\D/g,"").slice(0,4)},identityFormat:function(r){return void 0===r&&(r=""),(r=r.replace(/\s/g,"").slice(0,18)).length<7?r:7<=r.length&&r.length<15?r.replace(/(\d{6})/,"$1 "):15<=r.length?r.replace(/(\d{6})(\d{8})/,"$1 $2 "):void 0}});function f(r){var e=s.useRef(null);return e.current=r,e}function i(r,e){return"function"==typeof e&&(e=e(r)),v(v({},r),e)}function b(r,e){void 0===e&&(e=i);var t=s.useReducer(e,r),n=t[0],a=t[1],u=s.useCallback(function(){a(r)},[]);return[n,a,u]}function M(r){var e=r.value,t=r.errorMsg;return Array.isArray(e)&&!e.length?t:""===e||!1===e||void 0===e?t:void 0}function k(r){var e=r.value,t=r.pattern,n=r.errorMsg;if(e&&!e.match(t))return n}function y(r){var e=r.value,t=r.max,n=r.errorMsg;if(e&&e.length>t)return n}function F(r){var e=r.value,t=r.min,n=r.errorMsg;if(e&&e.length<t)return n}var t=Object.freeze({__proto__:null,isRequired:M,isPrice:function(r){var e=r.value,t=r.errorMsg;if(e&&!e.match(/^(0|[1-9]+)(\.[0-9]+)?$/))return t},isMobile:function(r){var e=r.value,t=void 0===e?"":e,n=r.errorMsg;if(t&&!t.match(/^(0|86|17951)?(13[0-9]|15[0-9]|17[0-9]|18[0-9]|14[0-9])[0-9]{8}$/))return n},isIdentity:function(r){var e=r.value,t=r.errorMsg;if(e&&!e.match(/^\d{17}[0-9Xx]$/))return t},isReg:k,isVerify:function(r){var e=r.value,t=r.errorMsg;if(e&&!e.match(/\d{4}/))return t},isMax:y,isMin:F});function O(r){return void 0!==r?r:void 0}var j={valuePropName:"value",autoValidator:!0};return r.Format=e,r.Strategies=t,r.default=function(){var r=b({}),e=r[0],d=r[1],t=b({}),n=t[0],i=t[1],g=f(e),o=f(n),h=s.useRef({}),p=s.useRef({});function m(u){return function(n){var r,e=o.current[u]||{},t=p.current[u].rules,a="";return t.forEach(function(r){if(!a){var e=function(r){var e=r.required,t=r.max,n=r.min,a=r.pattern,u=r.validator;return e?M:t?function(r){return y({value:r.value,errorMsg:r.errorMsg,max:t})}:n?function(r){return F({value:r.value,errorMsg:r.errorMsg,min:n})}:a?function(r){return k({value:r.value,errorMsg:r.errorMsg,pattern:a})}:u}(r);if(e){var t=e({value:n,errorMsg:r.message,formData:g.current});t&&(a=t)}}}),e.help===a?e.help:(i(((r={})[u]=function(r){return r?{help:r,hasFeedback:!0,validateStatus:"error"}:{help:"",hasFeedback:!1,validateStatus:"success"}}(a),r)),a)}}var a=s.useCallback(function(r){var e=Object.keys(r).reduce(function(r,e){var t;return v(v({},r),((t={})[e]={help:"",hasFeedback:!1,validateStatus:"success"},t))},{});i(e),d(r)},[]),u=s.useCallback(function(a){var r=Object.keys(a).reduce(function(r,e){var t,n;return n=a[e]?{help:a[e],hasFeedback:!0,validateStatus:"error"}:{help:"",hasFeedback:!1,validateStatus:"success"},v(v({},r),((t={})[e]=n,t))},{});i(r)},[]),c=s.useCallback(function(r){return 0===(r||Object.keys(g.current)).filter(function(r){var e=g.current[r],t=p.current[r].rules;return!!(t&&0<t.length)&&m(r)(e)}).length},[]),l=s.useCallback(function(){var r=function(t){var n={},a={};return Object.keys(t).forEach(function(r){var e=t[r].initialValue;n[r]=O(e),a[r]={help:"",hasFeedback:!1}}),{initialValues:n,initialErrors:a}}(p.current).initialValues;a(r)},[a]);return{formData:e,errorProps:n,init:function(n,r){var e;void 0===r&&(r=j);var t=h.current[n];if(t)return t;var a=r.valuePropName,u=void 0===a?"value":a,i=r.initialValue,o=r.rules,c=r.autoValidator,l=void 0===c||c,s=r.normalize,v=r.getValueformEvent;p.current[n]=r,g.current[n]=O(i);var f=(e={},Object.defineProperty(e,u,{get:function(){var r=g.current[n];return"checked"===r?!!r:r},enumerable:!0,configurable:!0}),e.onChange=function(r){var e,t;t=v?v(r):function(r,e){return void 0===r&&(r="value"),e&&e.target&&r in e.target?e.target[r]:e}(u,r),s&&(t=s(t)),o&&0<o.length&&l&&m(n)(t),d(((e={})[n]=t,e))},e);return h.current[n]=f},setFormData:a,setErrorProps:u,isValidateSuccess:c,onResetForm:l}},r}({},react);
